<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html,
    body {
      margin: 0;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    #actions {
      background-color: rgb(var(--base-1));
      border-bottom: 1px solid rgb(var(--neutral-1));
      padding: 10px;
      display: flex;
      gap: 10px;
    }

    gui-chart {
      display: block;
      width: 100%;
      height: 100vh;
    }
  </style>
  <title>@greycat/ui - gui-chart</title>
</head>

<body>
  <div id="actions">
    <button class="inverted" id="randomize">Randomize</button>
  </div>
  <gui-chart></gui-chart>

  <script type="module">
    import '../src/bundle.ts';

    const max = 100;
    const data1 = Array.from({ length: max }, (_, i) => ({ x: i, y: 0 }));
    const data2 = Array.from({ length: max }, (_, i) => ({ x: i, y: 0 }));
    const chart = document.querySelector('gui-chart');

    randomize();

    chart.config = {
      data: {
        xMin: -1,
        series: [
          { data: data1 },
          { type: 'scatter', data: data2 },
          {
            type: 'bar',
            data: [
              { x: 0, y: 10 }, { x: 1, y: 2 }, { x: 2, y: 6 }, { x: 3, y: 8 }, { x: 4, y: 15 }
            ]
          }
        ],
      },
    };

    function randomize() {
      let prev = 100;
      let prev2 = 80;
      for (let i = 0; i < max; i++) {
        prev += 5 - Math.random() * 10;
        prev = Math.max(0, prev);
        data1[i].y = prev;
        prev2 += 5 - Math.random() * 10;
        prev2 = Math.max(0, prev2);
        data2[i].y = prev2;
      }
    }

    document.querySelector('#randomize').onclick = () => {
      randomize();
      chart.config.data.series[0].data = data1;
      chart.config.data.series[1].data = data2;
      chart.update();
    };
  </script>
</body>

</html>